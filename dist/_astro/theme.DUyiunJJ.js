class n{constructor(){this.currentTheme="dark",this.isAutoMode=!0,this.isInitialized=!1,typeof window<"u"&&this.init()}init(){if(this.isInitialized)return;if(typeof window>"u"||typeof localStorage>"u"){console.warn("ThemeManager: Not in browser environment, skipping initialization");return}const e=localStorage.getItem("ethchile-theme"),t=localStorage.getItem("ethchile-auto-mode");t!==null&&(this.isAutoMode=t==="true"),!this.isAutoMode&&e?this.currentTheme=e:this.updateThemeBasedOnTime(),this.applyTheme(),this.startTimeCheck(),this.isInitialized=!0}updateThemeBasedOnTime(){const t=new Date().getHours();t>=6&&t<20?this.currentTheme="light":this.currentTheme="dark"}applyTheme(){if(typeof window>"u"||typeof document>"u")return;const e=document.documentElement;e.classList.remove("theme-light","theme-dark"),e.classList.add(`theme-${this.currentTheme}`);const t=document.querySelector('meta[name="theme-color"]');t&&t.setAttribute("content",this.currentTheme==="dark"?"#000000":"#ffffff"),typeof localStorage<"u"&&(localStorage.setItem("ethchile-theme",this.currentTheme),localStorage.setItem("ethchile-auto-mode",this.isAutoMode.toString()))}setTheme(e){this.currentTheme=e,this.isAutoMode=!1,this.applyTheme()}setAutoMode(e){this.isAutoMode=e,e&&(this.updateThemeBasedOnTime(),this.applyTheme()),typeof localStorage<"u"&&localStorage.setItem("ethchile-auto-mode",e.toString())}toggleTheme(){this.currentTheme=this.currentTheme==="dark"?"light":"dark",this.isAutoMode=!1,this.applyTheme()}getCurrentTheme(){return this.currentTheme}isAutoModeEnabled(){return this.isAutoMode}startTimeCheck(){typeof window>"u"||setInterval(()=>{if(this.isAutoMode){const e=this.currentTheme;this.updateThemeBasedOnTime(),e!==this.currentTheme&&(this.applyTheme(),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:this.currentTheme}})))}},6e4)}getTimeBasedTheme(){const t=new Date().getHours();return t>=6&&t<20?"light":"dark"}getNextThemeChangeTime(){const e=new Date,t=e.getHours();if(t>=6&&t<20){const i=new Date(e);return i.setHours(20,0,0,0),i}else{const i=new Date(e);return i.setDate(i.getDate()+1),i.setHours(6,0,0,0),i}}forceInit(){this.isInitialized||this.init()}}const s=new n;export{n as ThemeManager,s as default,s as themeManager};
