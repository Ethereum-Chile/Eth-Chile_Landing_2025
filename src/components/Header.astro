---
import { Image } from "astro:assets";
import logo from "../assets/logo-claro.png";
---

<header
  class="flex w-full min-h-[10vh] justify-between items-center px-10 fixed top-0 left-0 bg-transparent z-50 animate-fade-in"
  style="animation: fadeIn 1s ease-in-out;"
>
  <a
    href="javascript:void(0);"
    class="flex justify-center items-center"
    onclick="window.scrollTo(0, 0);"
  >
    <Image
      src={logo}
      alt="Logo Ethereum Chile"
      width={54}
      height={54}
      class="w-10 lg:w-[54px] h-10 lg:h-[54px]"
    />
    <h2
      class="font-raleway font-light text-3xl ml-4 hidden md:block text-white"
    >
      ethereum <span class="font-semibold">Chile</span>
    </h2>
  </a>

  <!-- Buy Ticket Button -->
  <div class="flex items-center space-x-4">
    <!-- Language Selector -->
    <div class="flex items-center space-x-1">
      <button
        class="px-3 py-2 text-white font-raleway font-medium text-sm"
        onclick="setLanguage('en')"
        id="lang-en"
      >
        EN
      </button>
      <button
        class="px-3 py-2 text-white font-raleway font-medium text-sm"
        onclick="setLanguage('es')"
        id="lang-es"
      >
        ES
      </button>
    </div>

    <a
      href="https://welcu.com/ethereum-chile/ethchile-2025/"
      target="_blank"
      rel="noopener noreferrer"
      class="px-6 py-3 border border-white text-white font-raleway font-medium rounded-lg hover:bg-white hover:text-black transition-all duration-300 ease-in-out transform hover:scale-105"
      id="buy-tickets-btn"
    >
      Buy Tickets
    </a>
  </div>
</header>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Active language button styling */
  .lang-active {
    background-color: white;
    color: black;
  }
</style>

<script>
  // Language switching functionality
  function setLanguage(lang) {
    // Remove active class from all language buttons
    document.getElementById("lang-en").classList.remove("lang-active");
    document.getElementById("lang-es").classList.remove("lang-active");

    // Add active class to selected language
    document.getElementById(`lang-${lang}`).classList.add("lang-active");

    // Store language preference
    localStorage.setItem("preferred-language", lang);

    // Update button text based on language
    const buyTicketsBtn = document.getElementById("buy-tickets-btn");
    if (buyTicketsBtn) {
      buyTicketsBtn.textContent =
        lang === "es" ? "Comprar Entradas" : "Buy Tickets";
    }

    // Dispatch custom event for other components to listen to
    window.dispatchEvent(
      new CustomEvent("languageChanged", { detail: { language: lang } })
    );

    // You can add actual language switching logic here
    console.log(`Language switched to: ${lang}`);
  }

  // Set initial language on page load
  document.addEventListener("DOMContentLoaded", function () {
    const savedLang = localStorage.getItem("preferred-language") || "en";
    setLanguage(savedLang);
  });
</script>
