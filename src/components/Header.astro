---
import { Image } from "astro:assets";
// Logo is now served from public directory
---

<header
  class="flex w-full min-h-[10vh] justify-between items-center px-10 fixed top-0 left-0 bg-transparent z-50 animate-fade-in"
  style="animation: fadeIn 1s ease-in-out;"
>
  <a href="/" class="flex items-center -ml-10 lg:ml-0">
    <!-- Mobile Logo (ethchile_logotipo_B.png) -->
    <Image
      src="/ethchile_logotipo_B.png"
      alt="Logo Ethereum Chile"
      width={108}
      height={54}
      class="w-24 h-12 lg:hidden object-contain"
    />
    <!-- Desktop Logo (ethchile_logotipo_A.png) -->
    <Image
      src="/ethchile_logotipo_A.png"
      alt="Logo Ethereum Chile"
      width={240}
      height={120}
      class="hidden lg:block w-[240px] h-[120px] object-contain"
    />
  </a>

  <!-- Buy Ticket Button -->
  <div class="flex items-center space-x-4 md:space-x-4 space-x-1">
    <!-- Language Selector -->
    <div class="flex items-center space-x-4">
      <button
        class="text-sm font-medium transition-all duration-300 text-white/60 hover:text-white/80"
        onclick="setLanguage('en')"
        id="lang-en"
      >
        EN
      </button>
      <button
        class="text-sm font-medium transition-all duration-300 text-white/60 hover:text-white/80 lang-active"
        onclick="setLanguage('es')"
        id="lang-es"
      >
        ES
      </button>
    </div>

    <a
      href="https://welcu.com/ethereum-chile/ethchile-2025/"
      target="_blank"
      rel="noopener noreferrer"
      class="relative px-6 py-3 text-white font-raleway font-medium rounded-lg transition-all duration-300 ease-in-out transform hover:scale-105 overflow-hidden group backdrop-blur-sm border border-white/30 hover:border-white/50"
      id="buy-tickets-btn"
      style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);"
    >
      <!-- Simple background overlay -->
      <div class="absolute inset-0 bg-white/5 rounded-lg"></div>

      <!-- Shiny hover effect - only on desktop -->
      <div
        class="hidden md:block absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-out rounded-lg"
      >
      </div>

      <!-- Button text -->
      <span class="relative z-10">Buy Tickets</span>
    </a>
  </div>
</header>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Active language button styling */
  .lang-active {
    color: white !important;
    font-weight: 600 !important;
    transition: all 0.3s ease !important;
  }
</style>

<script>
  // Language switching functionality
  function setLanguage(lang) {
    // Remove active class from all language buttons
    document.getElementById("lang-en").classList.remove("lang-active");
    document.getElementById("lang-es").classList.remove("lang-active");

    // Add active class to selected language
    document.getElementById(`lang-${lang}`).classList.add("lang-active");

    // Store language preference
    localStorage.setItem("eth-chile-language", lang);

    // Dispatch custom event for other components to listen to
    window.dispatchEvent(
      new CustomEvent("languageChanged", { detail: { language: lang } })
    );

    // You can add actual language switching logic here
    console.log(`Language switched to: ${lang}`);
  }

  // Set initial language on page load
  document.addEventListener("DOMContentLoaded", function () {
    const savedLang = localStorage.getItem("eth-chile-language") || "es";
    setLanguage(savedLang);
  });
</script>
